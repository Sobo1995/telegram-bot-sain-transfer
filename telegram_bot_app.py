
from flask import Flask, request
import telegram
from telegram import InlineKeyboardButton, InlineKeyboardMarkup
import os

TOKEN = "7913606596:AAFnw_ur4a5U0hs2mbeD-kAeZwIXJY89-pI"
bot = telegram.Bot(token=TOKEN)
app = Flask(__name__)

def send_main_menu(chat_id):
    keyboard = [
        [InlineKeyboardButton("üì§ –ì—É–π–≤—É—É–ª–≥–∞", callback_data='guiwuulga'),
         InlineKeyboardButton("üìà –•–∞–Ω—à", callback_data='hansh')],
        [InlineKeyboardButton("üí∞ –®–∏–º—Ç–≥—ç–ª", callback_data='shimtgel'),
         InlineKeyboardButton("üìÑ –ë–∏—á–∏–≥ –±–∞—Ä–∏–º—Ç", callback_data='barimt')],
        [InlineKeyboardButton("‚ÑπÔ∏è –ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π", callback_data='bidnii_tuhai')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    bot.send_message(
        chat_id=chat_id,
        text="–°–∞–π–Ω –±–∞–π–Ω–∞ —É—É! –¢–∞ –¥–∞—Ä–∞–∞—Ö “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω—ç—ç—Å —Å–æ–Ω–≥–æ–Ω–æ —É—É:",
        reply_markup=reply_markup
    )

@app.route(f"/{TOKEN}", methods=["POST"])
def webhook():
    update = telegram.Update.de_json(request.get_json(force=True), bot)
    chat_id = update.effective_chat.id

    if update.message:
        send_main_menu(chat_id)
    elif update.callback_query:
        data = update.callback_query.data
        response = ""

        if data == "guiwuulga":
            response = "üì§ –ì—É–π–≤—É—É–ª–≥–∞ —Ö–∏–π—Ö–∏–π–Ω —Ç—É–ª–¥ —Ç–∞–Ω—ã –±–∏—á–∏–≥ –±–∞—Ä–∏–º—Ç, —Ö“Ø–ª—ç—ç–Ω –∞–≤–∞–≥—á–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π. –¢–∞ –ª–∞–≤–ª–∞—Ö —É—Ç—Å–∞–∞—Ä –±–∏–¥—ç–Ω—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω–æ —É—É: 80908090"
        elif data == "hansh":
            response = "üìà –ú–∞–Ω–∞–π —Ö–∞–Ω—à –≥“Ø–π–ª–≥—ç—ç–Ω–∏–π –Ω”©—Ö—Ü–ª”©”©—Å —Ö–∞–º–∞–∞—Ä–∞–Ω —É—è–Ω —Ö–∞—Ç–∞–Ω —Ç–æ–≥—Ç–æ–æ–≥–¥–¥–æ–≥. –¢–∞ –±–∏–¥—ç–Ω—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω —Ö–∞–º–≥–∏–π–Ω —Ç–∞–∞—Ç–∞–π —Ö–∞–Ω—à–∏–π–≥ –∞–≤–∞–∞—Ä–∞–π!"
        elif data == "shimtgel":
            response = "üí∞ –®–∏–º—Ç–≥—ç–ª–∏–π–Ω —à–∞—Ç–ª–∞–ª:\n1 ‚Äì 1,000¬• ‚Üí 3,000‚ÇÆ + 30¬•\n1,000 ‚Äì 10,000¬• ‚Üí 5,000‚ÇÆ + 50¬•\n10,000 ‚Äì 20,000¬• ‚Üí 5,000‚ÇÆ + 100¬•\n20,000 ‚Äì 50,000¬• ‚Üí 10,000‚ÇÆ + 100¬•\n50,000 ‚Äì 100,000¬• ‚Üí 20,000‚ÇÆ + 100¬•\n100,000¬•+ ‚Üí 25,000‚ÇÆ + 100¬•"
        elif data == "barimt":
            response = "üìÑ –®–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –±–∏—á–∏–≥ –±–∞—Ä–∏–º—Ç:\n- –ò–ª–≥—ç—ç–≥—á–∏–π–Ω –±–∏—á–∏–≥ –±–∞—Ä–∏–º—Ç (–∑—É—Ä–∞–≥, —Ñ–∞–π–ª)\n- –•“Ø–ª—ç—ç–Ω –∞–≤–∞–≥—á–∏–π–Ω –±–∏—á–∏–≥ –±–∞—Ä–∏–º—Ç (–∑—É—Ä–∞–≥, —Ñ–∞–π–ª)\n- –î–∞–Ω—Å–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª, –±–∞–Ω–∫–Ω—ã —Ö–∞—è–≥\n- –ì“Ø–π–ª–≥—ç—ç–Ω–∏–π —É—Ç–≥–∞\n- –ê–∂–∏–ª “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π –≥—ç—Ä—ç—ç (—à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π —Ç–æ—Ö–∏–æ–ª–¥–æ–ª–¥)"
        elif data == "bidnii_tuhai":
            response = (
                "‚ÑπÔ∏è –ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π\n"
                "–ë–∏–¥ —Ö–∞–º–≥–∏–π–Ω —Å“Ø“Ø–ª–∏–π–Ω “Ø–µ–∏–π–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏, —É—Ö–∞–∞–ª–∞–≥ —à–∏–π–¥–ª–∏–π–≥ –∞—à–∏–≥–ª–∞–Ω —Ö–∞—Ä–∏–ª—Ü–∞–≥—á–¥—ã–Ω —Å–∞–Ω—Ö“Ø“Ø–≥–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç—ç–≥ —Ö—è–ª–±–∞—Ä—à—É—É–ª–∞—Ö –∑–æ—Ä–∏–ª–≥—ã–Ω –¥–æ—Ä 7 –¥–∞—Ö—å –∂–∏–ª–¥—ç—ç –∞–º–∂–∏–ª—Ç—Ç–∞–π “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞ —è–≤—É—É–ª–∂ –±–∞–π–Ω–∞.\n"
                "–î—ç–ª—Ö–∏–π–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã–≥ “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–¥—ç—ç –Ω—ç–≤—Ç—Ä“Ø“Ø–ª–∂, —é–∞–Ω–∏–π–Ω –±–æ–ª–æ–Ω –±—É—Å–∞–¥ –≥–∞–¥–∞–∞–¥ —Ç”©–ª–±”©—Ä —Ç–æ–æ—Ü–æ–æ–≥ —Ü–∞—Ö–∏–º–∂—É—É–ª–∞–Ω —Å–∞–ª–±–∞—Ä—Ç–∞–∞ —Ç“Ø“Ø—á—ç—ç–ª—ç–≥—á –Ω—å –±–æ–ª–æ–Ω –∞–∂–∏–ª–ª–∞–∂ –±–∞–π–Ω–∞.\n\n"
                "üéØ “Æ–Ω—ç—Ç –∑“Ø–π–ª: –ê–∂–∏–ª—Ç–∞–Ω, –•–∞—Ä–∏–ª—Ü–∞–≥—á, –ù–∏–π–≥—ç–º\n"
                "üî≠ –ê–ª—Å—ã–Ω —Ö–∞—Ä–∞–∞: –û—é—É–Ω–ª–∞–≥ –∏—Ä—ç—ç–¥“Ø–π, —Å–∞–π–Ω —Å–∞–π—Ö–Ω—ã–≥ –¥—ç–º–∂–∏–Ω—ç\n"
                "üéØ –≠—Ä—Ö—ç–º –∑–æ—Ä–∏–ª–≥–æ: –Æ–∞–Ω–∏–π–Ω —à–∏–ª–∂“Ø“Ø–ª–≥–∏–π–Ω –º—ç—Ä–≥—ç–∂–ª–∏–π–Ω —ë—Å –∑“Ø–π—Ç—ç–π, —Ö—É—É–ª—å —ë—Å–Ω—ã –¥–∞–≥—É—É –≥“Ø–π—Ü—ç—Ç–≥—ç–Ω —Ö–∞—Ä–∏–ª—Ü–∞–≥—á–∏–π–Ω —Å–∞–Ω—Ö“Ø“Ø–≥–∏–π–Ω —Ö—ç—Ä—ç–≥—Ü—ç—ç–≥ —Ö—è–ª–±–∞—Ä—à—É—É–ª–Ω–∞\n\n"
                "‚úÖ –≠–†–°–î–≠–õ–ì“Æ–ô: –•—É–≤–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª, –º”©–Ω–≥”©–Ω —Ö”©—Ä”©–Ω–≥–∏–π–≥ —Ö–∞–º–≥–∞–∞–ª—Å–∞–Ω\n"
                "‚úÖ –ê–õ–ë–ê–ù –Å–°–ù–´: –°–ó–•-–Ω—ã —Ç—É—Å–≥–∞–π –∑”©–≤—à”©”©—Ä”©–ª—Ç—ç–π, —Ö—É—É–ª—å —ë—Å–Ω—ã “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞\n"
                "‚úÖ –•–£–†–î–ê–ù: –ú–∏–Ω—É—Ç—ã–Ω –¥–æ—Ç–æ—Ä –≥“Ø–π–ª–≥—ç—ç —Ö–∏–π—Ö –±–æ–ª–æ–º–∂—Ç–æ–π\n"
                "‚úÖ –£–Ø–ù –•–ê–¢–ê–ù: –•–∞–Ω—à–∏–π–Ω —É—è–Ω —Ö–∞—Ç–∞–Ω –Ω”©—Ö—Ü”©–ª—Ç—ç–π"
            )

        bot.answer_callback_query(update.callback_query.id)
        bot.send_message(chat_id=chat_id, text=response)

    return "ok"

if __name__ == "__main__":
    port = int(os.environ.get("PORT", 5000))
    app.run(host="0.0.0.0", port=port)
